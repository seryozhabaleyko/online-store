import React, { Component } from 'react';
import { connect } from 'react-redux';
import * as R from 'ramda';

import { fetchPhoneById } from 'actions';
import { getPhoneById } from 'selectors';

class Phone extends Component {
    componentDidMount() {
        this.props.fetchPhoneById(this.props.match.params.id);
    }

    renderFields() {
        const { phone } = this.props;

        return (
            <div>fields</div>
        );
    }

    renderContent() {
        const { phone } = this.props;
        return (
            <div className='thumbnail'>
                <div className='row'>
                    <div className='col-md-6'>
                        <img
                            className='img-thumbnail'
                            src={phone.image}
                            alt={phone.name}
                        />
                    </div>
                    <div className='col-md-6'>
                        {this.renderFields()}
                    </div>
                </div>
                <div className='caption-full'>
                    <h4 className='pull-right'>${phone.price}</h4>
                    <h4>{phone.name}</h4>
                    <p>{phone.description}</p>
                </div>
            </div>
        );
    }

    renderSidebar() {
        return (
            <div>sidebar</div>
        );
    }

    render() {
        const { phone } = this.props;
        return (
            <div className='view-container'>
                <div className='container'>
                    <div className='row'>
                        <div className='col-md-9'>
                            {phone && this.renderContent()}
                        </div>
                        <div className='col-md-3'>
                            {phone && this.renderSidebar()}
                        </div>
                    </div>
                </div>
            </div>
        );
    }
}

const mapStateToProps = (state) => ({
    phone: getPhoneById(state, state.phonePage.id)
});

const mapDispatchToProps = {
    fetchPhoneById
};

export default connect(mapStateToProps, mapDispatchToProps)(Phone);